<Page
    x:Class="CTime2.Views.Statistics.DetailedStatisticView"
    
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:CTime2.Views.Statistics"
    xmlns:dataVis="using:WinRTXamlToolkit.Controls.DataVisualization"
    xmlns:charting="using:WinRTXamlToolkit.Controls.DataVisualization.Charting"
    xmlns:primitives="using:WinRTXamlToolkit.Controls.DataVisualization.Charting.Primitives"
    
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    mc:Ignorable="d">
    
    <Page.Resources>
        <ControlTemplate x:Key="CustomChartControlTemplate" TargetType="charting:Chart">
            <Border Background="{TemplateBinding Background}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    Padding="{TemplateBinding Padding}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <dataVis:Title Content="{TemplateBinding Title}"
                                   Style="{TemplateBinding TitleStyle}" />

                    <!-- Use a nested Grid to avoid possible clipping behavior resulting from ColumnSpan+Width=Auto -->
                    <Grid Grid.Row="1"
                          Margin="0,15,0,15">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        
                        <primitives:EdgePanel x:Name="ChartArea"
                                              Grid.Column="0"
                                              Style="{TemplateBinding ChartAreaStyle}">
                            <Grid Canvas.ZIndex="-1"
                                  Style="{TemplateBinding PlotAreaStyle}" />
                            <Border Canvas.ZIndex="10"
                                    BorderBrush="#FFFFFF"
                                    BorderThickness="0" />
                        </primitives:EdgePanel>
                        
                    </Grid>
                </Grid>
            </Border>
        </ControlTemplate>
    </Page.Resources>
    
    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <charting:Chart x:Name="LineChart"
                        Title="{x:Bind ViewModel.DisplayName, Mode=OneWay}"
                        Template="{StaticResource CustomChartControlTemplate}">
            <charting:LineSeries ItemsSource="{x:Bind ViewModel.ChartItems, Mode=OneWay}"
                                 IndependentValueBinding="{Binding Date}"
                                 DependentValueBinding="{Binding Value}">
                <charting:LineSeries.PolylineStyle>
                    <Style TargetType="Polyline">
                        <Setter Property="StrokeThickness" Value="5" />
                        <Setter Property="Stroke" Value="{ThemeResource SystemAccentColor}" />
                    </Style>
                </charting:LineSeries.PolylineStyle>
                <charting:LineSeries.DataPointStyle>
                    <Style TargetType="charting:LineDataPoint">
                        <Setter Property="Background" Value="{ThemeResource SystemAccentColor}" />
                        <Setter Property="BorderBrush" Value="White" />
                        <Setter Property="BorderThickness" Value="3" />
                        <Setter Property="Width" Value="10" />
                        <Setter Property="Height" Value="10" />
                    </Style>
                </charting:LineSeries.DataPointStyle>
                <charting:LineSeries.DependentRangeAxis>
                    <charting:LinearAxis Orientation="Y" 
                                         Location="Right" 
                                         Title="Stunden"
                                         ShowGridLines="True" 
                                         MajorTickMarkStyle="{x:Null}"
                                         MinorTickMarkStyle="{x:Null}"
                                         x:Name="ValueAxis">
                        <charting:LinearAxis.GridLineStyle>
                            <Style TargetType="Line">
                                <Setter Property="Stroke" Value="LightGray" />
                                <Setter Property="StrokeThickness" Value="1" />
                            </Style>
                        </charting:LinearAxis.GridLineStyle>    
                    </charting:LinearAxis>
                </charting:LineSeries.DependentRangeAxis>
                <charting:LineSeries.IndependentAxis>
                    <charting:DateTimeAxis Orientation="X" 
                                           Location="Bottom" 
                                           MajorTickMarkStyle="{x:Null}"
                                           MinorTickMarkStyle="{x:Null}"
                                           x:Name="DateTimeAxis">
                        <charting:DateTimeAxis.AxisLabelStyle>
                            <Style TargetType="charting:AxisLabel">
                                <Setter Property="FontSize" Value="10" />
                            </Style>
                        </charting:DateTimeAxis.AxisLabelStyle>
                    </charting:DateTimeAxis>
                </charting:LineSeries.IndependentAxis>
            </charting:LineSeries>
        </charting:Chart>
    </Grid>
</Page>
 
